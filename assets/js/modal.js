!function(){function e(e){this.$modal=document.querySelector(e),this.focusedElBeforeOpen;const t=this.$modal.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]');this.focusableEls=Array.prototype.slice.call(t),this.firstFocusableEl=this.focusableEls[0],this.lastFocusableEl=this.focusableEls[this.focusableEls.length-1],this.close()}e.prototype.open=function(){const e=this;this.$modal.removeAttribute("aria-hidden"),this.$modal.removeAttribute("hidden"),this.focusedElBeforeOpen=document.activeElement,this.$modal.addEventListener("keydown",function(t){e.handleKeyDown(t)}),this.firstFocusableEl.focus()},e.prototype.close=function(){this.$modal.setAttribute("aria-hidden",!0),this.$modal.setAttribute("hidden",!0),this.focusedElBeforeOpen&&this.focusedElBeforeOpen.focus()},e.prototype.handleKeyDown=function(e){function t(){document.activeElement===s.firstFocusableEl&&(e.preventDefault(),s.lastFocusableEl.focus())}function o(){document.activeElement===s.lastFocusableEl&&(e.preventDefault(),s.firstFocusableEl.focus())}const s=this,l=9,n=27;switch(e.keyCode){case l:if(1===s.focusableEls.length){e.preventDefault();break}e.shiftKey?t():o();break;case n:s.close()}},e.prototype.addEventListeners=function(e){const t=this;e.addEventListener("click",function(){t.open()}),this.$modal.querySelectorAll(".js-modal-close").forEach(function(e){e.addEventListener("click",function(){t.close()})})},document.querySelectorAll("[data-modal-target]").forEach(function(t){console.log("found ",t);const o=`#${t.dataset.modalTarget}`;new e(o).addEventListeners(t,o)})}();